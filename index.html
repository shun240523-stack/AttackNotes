<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>AttackNotes</title>
<link rel="icon" href="icon.png">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: "Helvetica Neue", Arial, sans-serif;
  background: radial-gradient(circle at center, #2a0f1f 0%, #120812 100%);
  color: white;
}

.screen {
  width: 100%;
  height: 100%;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.screen.active {
  display: flex;
}

.logo {
  width: 110px;
  height: 110px;
  margin-bottom: 20px;
  filter: drop-shadow(0 0 18px rgba(255, 80, 80, 0.6));
  animation: float 3s ease-in-out infinite;
}

.logo img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

h1 {
  font-size: 3.5rem;
  margin-bottom: 10px;
  background: linear-gradient(to right, #fff, #ff9aa9);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}


.description {
  color: #9ca3af;
  margin-bottom: 40px;
  text-align: center;
}

button {
  padding: 14px 30px;
  border-radius: 12px;
  border: none;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
}

.btn-main {
  background: linear-gradient(135deg, #ff5c8a, #ff3b3b);
  color: white;
}

.btn-sub {
  background: rgba(255,255,255,0.15);
  color: white;
}

.btn-danger {
  background: #ef4444;
  color: white;
}

textarea {
  width: 85%;
  height: 65%;
  border-radius: 20px;
  border: none;
  padding: 25px;
  font-size: 1.2rem;
  resize: none;
  background: rgba(255,255,255,0.06);
  color: white;
  outline: none;
}

.button-row {
  display: flex;
  gap: 20px;
  margin-top: 20px;
}

.memo-list {
  width: 80%;
  max-width: 900px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.memo-item {
  background: rgba(255,255,255,0.08);
  padding: 20px;
  border-radius: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.memo-item small {
  color: #9ca3af;
}

.memo-actions {
  display: flex;
  gap: 10px;
}

@keyframes float {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
  100% {
    transform: translateY(0);
  }
}

</style>
</head>

<body>

<!-- ãƒ›ãƒ¼ãƒ  -->
<div id="home" class="screen active">
  <div class="logo">
    <img src="icon.png" alt="AttackNotes Icon">
  </div>

  <h1>AttackNotes</h1>
  <p class="description">
    æ€è€ƒã‚’æ®´ã£ã¦ã€æ–°ã—ã„æƒ³åƒã‚’ï¼
  </p>

  <div class="button-row">
    <button class="btn-main" onclick="openEditor()">âœ æ–°ã—ãæ›¸ã</button>
    <button class="btn-sub" onclick="openList()">ğŸ’¾ ä¿å­˜æ¸ˆã¿</button>
  </div>
</div>

<!-- ã‚¨ãƒ‡ã‚£ã‚¿ -->
<div id="editor" class="screen">
  <textarea id="memoArea" placeholder="ã“ã“ã«æ›¸ãæ®´ã‚‹â€¦"></textarea>
  <div class="button-row">
    <button class="btn-main" onclick="saveMemo()">â¤ï¸ ä¿å­˜</button>
    <button class="btn-sub" onclick="backHome()">æˆ»ã‚‹</button>
  </div>
</div>

<!-- ä¿å­˜ä¸€è¦§ -->
<div id="list" class="screen">
  <h2>ğŸ’¾ ä¿å­˜æ¸ˆã¿ãƒãƒ¼ãƒˆ</h2>
  <div id="memoList" class="memo-list"></div>

  <div class="button-row">
    <button class="btn-sub" onclick="backHome()">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
  </div>
</div>

<script>
const home = document.getElementById("home");
const editor = document.getElementById("editor");
const list = document.getElementById("list");
const memoArea = document.getElementById("memoArea");
const memoList = document.getElementById("memoList");

function switchScreen(screen) {
  [home, editor, list].forEach(s => s.classList.remove("active"));
  screen.classList.add("active");
}

function backHome() {
  memoArea.value = "";
  switchScreen(home);
}

function openEditor(text = "") {
  memoArea.value = text;
  switchScreen(editor);
  memoArea.focus();
}

function saveMemo() {
  if (!memoArea.value.trim()) return;

  const memos = JSON.parse(localStorage.getItem("attackMemos") || "[]");

  memos.push({
    id: Date.now(),
    text: memoArea.value,
    date: new Date().toLocaleDateString()
  });

  localStorage.setItem("attackMemos", JSON.stringify(memos));
  backHome();
}

function openList() {
  memoList.innerHTML = "";
  const memos = JSON.parse(localStorage.getItem("attackMemos") || "[]");

  memos.slice().reverse().forEach(memo => {
    const div = document.createElement("div");
    div.className = "memo-item";

    div.innerHTML = `
      <div>
        <strong>${memo.text.split("\n")[0].slice(0,30)}</strong><br>
        <small>${memo.date}</small>
      </div>
      <div class="memo-actions">
        <button class="btn-sub" onclick="openEditor(\`${memo.text.replace(/`/g,"\\`")}\`)">é–‹ã</button>
        <button class="btn-danger" onclick="destroySaved(${memo.id})">ç ´å£Š</button>
      </div>
    `;

    memoList.appendChild(div);
  });

  switchScreen(list);
}

function destroySaved(id) {
  const ok = confirm("ã“ã®ãƒãƒ¼ãƒˆã‚’å®Œå…¨ã«ç ´å£Šã—ã¾ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚");

  if (!ok) return;

  let memos = JSON.parse(localStorage.getItem("attackMemos") || "[]");
  memos = memos.filter(m => m.id !== id);

  localStorage.setItem("attackMemos", JSON.stringify(memos));
  openList();
}
</script>

</body>
</html>
